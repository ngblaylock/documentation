<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Firestore | Nathan&#39;s Docs</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/assets/css/0.styles.5fd868be.css" as="style"><link rel="preload" href="/assets/js/app.54493d1a.js" as="script"><link rel="preload" href="/assets/js/2.591a3c31.js" as="script"><link rel="preload" href="/assets/js/10.3045a607.js" as="script"><link rel="prefetch" href="/assets/js/11.53e076de.js"><link rel="prefetch" href="/assets/js/12.bc9ec081.js"><link rel="prefetch" href="/assets/js/13.74a797c9.js"><link rel="prefetch" href="/assets/js/14.ea86c806.js"><link rel="prefetch" href="/assets/js/15.6c23b5b1.js"><link rel="prefetch" href="/assets/js/16.13095159.js"><link rel="prefetch" href="/assets/js/17.f1a8057e.js"><link rel="prefetch" href="/assets/js/18.265480d8.js"><link rel="prefetch" href="/assets/js/19.080eecba.js"><link rel="prefetch" href="/assets/js/20.97a83ac1.js"><link rel="prefetch" href="/assets/js/21.df11e2bc.js"><link rel="prefetch" href="/assets/js/22.4082ee13.js"><link rel="prefetch" href="/assets/js/23.3c67537f.js"><link rel="prefetch" href="/assets/js/24.7ac570ae.js"><link rel="prefetch" href="/assets/js/25.70f8cb21.js"><link rel="prefetch" href="/assets/js/26.b1ac5462.js"><link rel="prefetch" href="/assets/js/3.06582f54.js"><link rel="prefetch" href="/assets/js/4.65be5248.js"><link rel="prefetch" href="/assets/js/5.ccfe4958.js"><link rel="prefetch" href="/assets/js/6.f2b85beb.js"><link rel="prefetch" href="/assets/js/7.fb36b2fe.js"><link rel="prefetch" href="/assets/js/8.695f3fbe.js"><link rel="prefetch" href="/assets/js/9.da57d393.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5fd868be.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Nathan's Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue.js</a></div><div class="nav-item"><a href="/firebase/" class="nav-link router-link-active">Firebase</a></div><div class="nav-item"><a href="/other/" class="nav-link">Other</a></div><div class="nav-item"><a href="https://www.nathanblaylock.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Portfolio
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue.js</a></div><div class="nav-item"><a href="/firebase/" class="nav-link router-link-active">Firebase</a></div><div class="nav-item"><a href="/other/" class="nav-link">Other</a></div><div class="nav-item"><a href="https://www.nathanblaylock.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Portfolio
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Firebase</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/firebase/" class="sidebar-link">Firebase</a></li><li><a href="/firebase/hosting.html" class="sidebar-link">Hosting</a></li><li><a href="/firebase/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/firebase/firestore.html" class="active sidebar-link">Firestore</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/firebase/firestore.html#initialize" class="sidebar-link">Initialize</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#read-data" class="sidebar-link">Read Data</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#write-data" class="sidebar-link">Write Data</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#delete-data" class="sidebar-link">Delete Data</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#querying-data" class="sidebar-link">Querying Data</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#update-and-set" class="sidebar-link">Update and Set</a></li></ul></li><li><a href="/firebase/securityrules.html" class="sidebar-link">Security Rules</a></li><li><a href="/firebase/nuxtfire.html" class="sidebar-link">Nuxt-Fire</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Other</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="firestore"><a href="#firestore" class="header-anchor">#</a> Firestore</h1> <h2 id="initialize"><a href="#initialize" class="header-anchor">#</a> Initialize</h2> <p>Start out by getting the project set up. Some things that you are going to need are the SDK. Put this in order, before any custom scripts that you write.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- THE CORE FIREBASE JS SDK IS ALWAYS REQUIRED AND MUST BE LISTED FIRST --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- THIS IS THE CODE TO RUN FIRESTORE --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- THIS IS THE CONFIGURATION FILE THAT FIREBASE GIVES YOU WHEN YOU SET UP YOUR PROJECT IN THE BROWSER --&gt;</span>
<span class="token comment">&lt;!-- PAY ATTENTION TO THE SECOND LINE FROM THE TOP. THAT LINE, YOU WILL NEED TO ADD --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// Your web app's Firebase configuration</span>
    <span class="token keyword">var</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
        apiKey<span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
        authDomain<span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
        databaseURL<span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
        projectId<span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
        storageBucket<span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
        messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
        appId<span class="token operator">:</span> <span class="token string">&quot;...&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Initialize Firebase</span>
    firebase<span class="token punctuation">.</span><span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// YOU WILL NEED TO ADD THIS LINE YOURSELF</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> firebase<span class="token punctuation">.</span><span class="token function">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Once that is set up, you can go into <code>app.js</code> and add the following code to get any documents in your first collection.</p> <h2 id="read-data"><a href="#read-data" class="header-anchor">#</a> Read Data</h2> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'collectionName'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">snapshot</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    snapshot<span class="token punctuation">.</span>docs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="realtime-listener"><a href="#realtime-listener" class="header-anchor">#</a> Realtime Listener</h3> <p>Instead of using the <code>.get().then()</code> method, you can use <code>.onShapshot()</code> which will listen for changes in the database and update it automatically so you do not need to refresh the page. With an error message, it would look like the following:</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'collectionName'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onSnapshot</span><span class="token punctuation">(</span><span class="token parameter">snapshot</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    snapshot<span class="token punctuation">.</span>docs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="write-data"><a href="#write-data" class="header-anchor">#</a> Write Data</h2> <p>When you are writing data, be sure to always give a reference with the unique id for each. Try storing it in a <code>data-id</code> attribute or something like that.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'collectionName'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Bobby Joe&quot;</span><span class="token punctuation">,</span>
    city<span class="token operator">:</span> <span class="token string">&quot;Bobby's World&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="delete-data"><a href="#delete-data" class="header-anchor">#</a> Delete Data</h2> <p>You will probably need to add an event listener to each spot you want to delete.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'collectionName'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">&quot;docName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h2 id="querying-data"><a href="#querying-data" class="header-anchor">#</a> Querying Data</h2> <p>You can query data by certain conditions such as using <code>where</code> combined with <code>==</code>, <code>&gt;</code>, <code>&lt;</code>, etc. or doing an <code>orderby</code> function. Then Firebase will only return documents given those considtions.</p> <h2 id="update-and-set"><a href="#update-and-set" class="header-anchor">#</a> Update and Set</h2> <p>You can reset information in the document. This will override everything in the document.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">&quot;docName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Los Angeles&quot;</span><span class="token punctuation">,</span>
    state<span class="token operator">:</span> <span class="token string">&quot;CA&quot;</span><span class="token punctuation">,</span>
    country<span class="token operator">:</span> <span class="token string">&quot;USA&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or you can update a single part. It replaces the key that is being updates, but will not erase what is not mentioned.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">&quot;docName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Sydney&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/5/2020, 10:27:04 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/firebase/authentication.html" class="prev">Authentication</a></span> <span class="next"><a href="/firebase/securityrules.html">Security Rules</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.54493d1a.js" defer></script><script src="/assets/js/2.591a3c31.js" defer></script><script src="/assets/js/10.3045a607.js" defer></script>
  </body>
</html>
