<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Firestore | Nathan&#39;s Docs</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/assets/css/0.styles.7905dc5c.css" as="style"><link rel="preload" href="/assets/js/app.76bbe569.js" as="script"><link rel="preload" href="/assets/js/2.591a3c31.js" as="script"><link rel="preload" href="/assets/js/10.aa47c804.js" as="script"><link rel="prefetch" href="/assets/js/11.ba164d86.js"><link rel="prefetch" href="/assets/js/12.2cf33a9d.js"><link rel="prefetch" href="/assets/js/13.85925e70.js"><link rel="prefetch" href="/assets/js/14.c7971eef.js"><link rel="prefetch" href="/assets/js/15.712599cf.js"><link rel="prefetch" href="/assets/js/16.942c9c2c.js"><link rel="prefetch" href="/assets/js/17.e1ebf4cd.js"><link rel="prefetch" href="/assets/js/18.2e96d64c.js"><link rel="prefetch" href="/assets/js/19.23c60402.js"><link rel="prefetch" href="/assets/js/20.e7b2c464.js"><link rel="prefetch" href="/assets/js/21.fba0fcf3.js"><link rel="prefetch" href="/assets/js/22.723aa5cc.js"><link rel="prefetch" href="/assets/js/23.a4451146.js"><link rel="prefetch" href="/assets/js/24.323b8aa4.js"><link rel="prefetch" href="/assets/js/25.150a8a7e.js"><link rel="prefetch" href="/assets/js/26.99c047fc.js"><link rel="prefetch" href="/assets/js/27.c40e47a5.js"><link rel="prefetch" href="/assets/js/28.ec4b1665.js"><link rel="prefetch" href="/assets/js/29.4c952c74.js"><link rel="prefetch" href="/assets/js/3.408522e7.js"><link rel="prefetch" href="/assets/js/30.6fa7596d.js"><link rel="prefetch" href="/assets/js/4.59b893e7.js"><link rel="prefetch" href="/assets/js/5.12b35f73.js"><link rel="prefetch" href="/assets/js/6.f2b85beb.js"><link rel="prefetch" href="/assets/js/7.985f1c2c.js"><link rel="prefetch" href="/assets/js/8.37bcef16.js"><link rel="prefetch" href="/assets/js/9.ca15c1c8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7905dc5c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Nathan's Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue.js</a></div><div class="nav-item"><a href="/firebase/" class="nav-link router-link-active">Firebase</a></div><div class="nav-item"><a href="https://www.nathanblaylock.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Portfolio
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue.js</a></div><div class="nav-item"><a href="/firebase/" class="nav-link router-link-active">Firebase</a></div><div class="nav-item"><a href="https://www.nathanblaylock.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Portfolio
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Firebase</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/firebase/" class="sidebar-link">Firebase</a></li><li><a href="/firebase/hosting.html" class="sidebar-link">Hosting</a></li><li><a href="/firebase/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/firebase/firestore.html" class="active sidebar-link">Firestore</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/firebase/firestore.html#read-data" class="sidebar-link">Read Data</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#write-data" class="sidebar-link">Write Data</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#delete-data" class="sidebar-link">Delete Data</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#querying-data" class="sidebar-link">Querying Data</a></li><li class="sidebar-sub-header"><a href="/firebase/firestore.html#update-and-set" class="sidebar-link">Update and Set</a></li></ul></li><li><a href="/firebase/storage.html" class="sidebar-link">Storage</a></li><li><a href="/firebase/securityrules.html" class="sidebar-link">Security Rules</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Toolkit</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Other</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="firestore"><a href="#firestore" class="header-anchor">#</a> Firestore</h1> <p>Before doing any work here, you will need to configure your app using the code from the <a href="/firebase/" class="router-link-active">Firebase</a> page.</p> <h2 id="read-data"><a href="#read-data" class="header-anchor">#</a> Read Data</h2> <p>This will read the data once. It does not automatically update like the realtime listener.</p> <div class="language-js extra-class"><pre class="language-js"><code>firebase
  <span class="token punctuation">.</span><span class="token function">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">snapshot</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    snapshot<span class="token punctuation">.</span>docs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="realtime-listener"><a href="#realtime-listener" class="header-anchor">#</a> Realtime Listener</h3> <p>Instead of using the <code>.get().then()</code> method, you can use <code>.onShapshot()</code> which will listen for changes in the database and update it automatically so you do not need to refresh the page. With an error message, it would look like the following:</p> <div class="language-js extra-class"><pre class="language-js"><code>firebase
  <span class="token punctuation">.</span><span class="token function">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">onSnapshot</span><span class="token punctuation">(</span>
    <span class="token parameter">snapshot</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      snapshot<span class="token punctuation">.</span>docs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="write-data"><a href="#write-data" class="header-anchor">#</a> Write Data</h2> <p>When you are writing data, be sure to always give a reference with the unique id for each. Try storing it in a <code>data-id</code> attribute or something like that.</p> <div class="language-js extra-class"><pre class="language-js"><code>firebase
  <span class="token punctuation">.</span><span class="token function">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Bobby Joe&quot;</span><span class="token punctuation">,</span>
    city<span class="token operator">:</span> <span class="token string">&quot;Bobby's World&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="delete-data"><a href="#delete-data" class="header-anchor">#</a> Delete Data</h2> <p>You will probably need to add an event listener to each spot you want to delete.</p> <div class="language-js extra-class"><pre class="language-js"><code>firebase
  <span class="token punctuation">.</span><span class="token function">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">&quot;docName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="querying-data"><a href="#querying-data" class="header-anchor">#</a> Querying Data</h2> <p>You can query data by certain conditions such as using <code>where</code> combined with <code>==</code>, <code>&gt;</code>, <code>&lt;</code>, etc. or doing an <code>orderby</code> function. Then Firebase will only return documents given those considtions.</p> <h2 id="update-and-set"><a href="#update-and-set" class="header-anchor">#</a> Update and Set</h2> <p>You can reset information in the document. This will override everything in the document.</p> <div class="language-js extra-class"><pre class="language-js"><code>firebase
  <span class="token punctuation">.</span><span class="token function">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">&quot;docName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Los Angeles&quot;</span><span class="token punctuation">,</span>
    state<span class="token operator">:</span> <span class="token string">&quot;CA&quot;</span><span class="token punctuation">,</span>
    country<span class="token operator">:</span> <span class="token string">&quot;USA&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or you can update a single part. It replaces the key that is being updates, but will not erase what is not mentioned.</p> <div class="language-js extra-class"><pre class="language-js"><code>firebase
  <span class="token punctuation">.</span><span class="token function">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">&quot;docName&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Sydney&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/22/2020, 7:18:43 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/firebase/authentication.html" class="prev">Authentication</a></span> <span class="next"><a href="/firebase/storage.html">Storage</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.76bbe569.js" defer></script><script src="/assets/js/2.591a3c31.js" defer></script><script src="/assets/js/10.aa47c804.js" defer></script>
  </body>
</html>
